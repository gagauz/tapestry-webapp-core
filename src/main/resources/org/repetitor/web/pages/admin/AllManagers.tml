<t:admin.MainTemplate
	xmlns:t="http://tapestry.apache.org/schema/tapestry_5_3.xsd"
	xmlns:p="tapestry:parameter">
	
	<div class="row">
    	<div class="col-md-12 col-lg-12">
			<h2>Администраторы</h2>
			
   			<t:beaneditform class="form-horizontal" t:id="form" t:object="object" cancel="true" exclude="id,created,updated,password,passwordhash" add="newpassword">
   				<p:newpassword>
   					<t:if test="object.id">
	   					<t:label for="newpassword" class="col-sm-3 control-label"/>
	  					<div class="col-sm-2">
	   						<t:textfield class="form-control" t:id="newpassword" value="password" validate="minlength=6"/>
	   					</div>
	   					<p:else>
	   						<t:label for="password" class="col-sm-3 control-label"/>
		  					<div class="col-sm-2">
		   						<t:textfield class="form-control" t:id="password" value="object.password" validate="required,minlength=6"/>
		   					</div>
	   					</p:else>
   					</t:if>
   				</p:newpassword>
   			</t:beaneditform>
    		
    		<h2>Список всех администраторов</h2>
    		<t:grid class="table table-striped" source="managers" row="manager"
    			add="edit"
    			exclude="password,passwordhash"
    			reorder="edit,id">
    			
    			<p:editCell>
    				<t:eventlink event="edit" context="manager">Редакт.</t:eventlink>
    			</p:editCell>
    		</t:grid>
    		
    	</div>
    </div>

</t:admin.MainTemplate>